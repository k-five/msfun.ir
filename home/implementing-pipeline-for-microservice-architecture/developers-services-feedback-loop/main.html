<main>
	<div class="content-r">
		<h1>developers-services-feedback-loop</h1>
        <hr>
        <p>We talked about failed actions, but what if we want to plan an action to do based on a succeeded action?</p>
        <p>For example after pushing to our shared repository (anywhere it is) we want to delete some files on our local machine.</p>
        <p>Or after the source has been built on the server, we want to do another action.</p>
        <p>So somehow we need a kind of <strong>guarantee</strong> if the previous action succeeded, do the next one.</p>
        <p>The think that comes to mind is things like <strong>notifications</strong>. And yes. GitHub has notification for new commit on a repository. We can email ourselves. And yes. GitHub has notification for new commit on a repository. We can email ourselves. We can send text. etc.</p>
        <p><strong>BUT</strong></p>
        <p>How about automate this flow?</p>
        <p>We <strong>git push</strong> and all things happen automatically up to the server. If we get notification <strong>X</strong> we want to something (next thing to do) happens automatically. Some kind of Local Machine and Remote Machine communication but things should be done automatically.</p>
        <p>Two things came to my mind:</p>
        <ul>
            <li>Email Notification</li>
            <li>Web Socket (open connection)</li>
        </ul>

        <h3 class="sub-title">Email Notification</h3>
        <p>A screenshot we saw on <a href="../handle-failed-action">handle-failed-action</a>, actually I tried to create a loop between my machine and the server using email.</p>
        <img width="100%" src="/build/img/02-13-alerting-remote-to-local-communicatin-via-emailing.png" alt="02-13-alerting-remote-to-local-communicatin-via-emailing.png" />
        <p>On the right side I a have bash script that in a loop - every 1 second - checks the email I have gotten, to see if there is knew one. If yes it tries to read the subject using <strong>curl</strong> command.</p>
        <p>it is the fasted way of checking emails in this way but requires to check it in a loop every 1 second.</p>
        <p>ON the left side I send email to myself and you can see the bash script on the right side detect the new email and prints a subjects.</p>
        <p>At this point based on subjects of emails we get, whether it is:</p>
        <ul>
            <li>failed</li>
            <li>succeeded</li>
            <li>etc</li>
        </ul>
        <p>we (= our script) can decide to do another action.</p>
        <p>It works. I tired it, but it is not:</p>
        <ul>
            <li>inefficient</li>
            <li>unreliable</li>
        </ul>

        <h3 class="sub-title">Web Socket</h3>
        <p>Using web socket we can have an opened connection between us and the remote machine that has a web socket server.</p>
        <p>I tired it, but not completely done. And still I am working on it.</p>
        <p>The result will be shared here.</p>
        
        <h3 class="sub-title">Conclusion</h3>
        <p>Implementing pipelines for microservices is a very interesting topic. I really enjoyed sharing these publicly, and hope the same for you.</p>
        <p>Thank you for following this series.</p>
        
        <p>Back <a href="../handle-failed-action">Handle Failed Action</a></p>

		DD_MM_YYYY
        <div class="edit-on-github">
            <a target="_blank" href="https://github.com/k-five/msfun.ir/blob/master/home/implementing-pipeline-for-microservice-architecture/developers-services-feedback-loop/main.html">Edit on Github</a>
        </div>
	</div>
</main>
